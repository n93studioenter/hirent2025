
@{
    ViewBag.Title = "Category_main";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
@using HirentWeb2022.Models;
@model List<tb_CategoryMain>
<div class="right_col" role="main" style="min-height: 699px;">
    <div class="">
        <div class="page-title">
            <div class="title_left">
                <h3>QUẢN LÝ MAIN CATEGORY</h3>
            </div>

            <div class="title_right">
                <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search for...">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button">Search!</button>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="clearfix"></div>

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <!-- Create new category -->
                <div class="x_panel">
                    <div class="x_title">
                        <h2>Tạo 1 category mới</h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li>
                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                            </li>
                            <li>
                                <a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <br>
                        <form id="demo-form2" class="form-horizontal form-label-left">
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                    Tên Main-Category <span class="required">*</span>
                                </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="hidden" id="ipMainCateID" value="0" />
                                    <input type="text" id="ipCateName" required="required" class="form-control col-md-7 col-xs-12 mycontrol">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                    Main-Category Name (en) <span class="required"></span>
                                </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" id="ipCateNameen" class="form-control col-md-7 col-xs-12 mycontrol">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">
                                    Icon <span class="required">*</span>
                                </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" id="ipMainCateIcon" name="last-name" required="required" class="form-control col-md-7 col-xs-12 mycontrol">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">
                                    Mô tả nhanh <span class="required">*</span>
                                </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" id="ipDesc" name="last-name" required="required" class="form-control col-md-7 col-xs-12 mycontrol">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="sort-arrange">
                                    Sort thứ tự <span class="required">*</span>
                                </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="number" id="ipSort" name="sort-arrange" required="required" class="form-control col-md-7 col-xs-12 mycontrol">
                                </div>
                            </div>
                            <div class="ln_solid"></div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                                    <button id="btnReset" class="btn btn-primary" type="reset">Reset</button>
                                    <button id="btnCreate" type="button" class="btn btn-danger">Lưu</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- /Create new category -->

            <div class="col-md-12 col-sm-12 col-xs-12">
                <!-- Table  -->
                <div class="x_panel">
                    <div class="x_title">
                        <h2>Danh sách Category đang có</h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li>
                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                <ul class="dropdown-menu" role="menu">
                                    <li>
                                        <a href="#">Settings 1</a>
                                    </li>
                                    <li>
                                        <a href="#">Settings 2</a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>

                    <div class="x_content">
                        <div id="ContentPlaceHolder1_dvMainCateList" class="table-responsive">
                            <table class="table" style="overflow: hidden">
                                <thead>
                                    <tr class="headings">
                                        <th>
                                            <input type="checkbox" id="check-all" class="flat">
                                        </th>
                                        <th class="column-title">Sort</th>
                                        <th class="column-title">Tên MainCate</th>
                                        <th class="column-title">Tên MainCate by English</th>
                                        <th class="column-title">Icon</th>
                                        <th class="column-title">Mô Tả nhanh</th>
                                        <th class="column-title">Mô Tả by English</th>
                                        <th class="column-title">Tình trạng</th>
                                        <th class="column-title">Ngày tạo</th>
                                        <th class="column-title no-link last"><span class="nobr">Edit</span></th>
                                        <th class="column-title no-link last"><span class="nobr">Delete</span></th>
                                        <th class="bulk-actions" colspan="9"><a class="antoo" style="color:#fff; font-weight:500;">Bulk Actions( <span class="action-cnt"> </span> ) <i class="fa fa-chevron-down"></i></a></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @if (Model != null)
                                    {
                                        foreach (var item in Model)
                                        {
                                            <tr class="even pointer">
                                                <td class="a-center"><input type="checkbox" class="flat" name="table_records"></td>
                                                <td class=" "><a href="#" class="btn btn-info btn-xs fontCatNumber" style="background-color:darkred;" onclick="btnChangeSort(this,'4')">@item.Sort</a></td>
                                                <td class=" ">@item.MainCateName</td>
                                                <td class=" ">@item.Language</td>
                                                <td class=" "><i class="@item.MainCateIcon"></i></td>
                                                <td class=" ">@item.MainCateDesc</td>
                                                <td>
                                                </td>
                                                <td><a href="#" class="btn btn-info btn-xs" style="background-color: teal;" onclick="btnChangeDisable(this,'4','Dụng cụ, thiết bị')">Enable</a></td>
                                                <td class=" ">@item.CreateDate.ToShortDateString()</td>
                                                <td class=" last"><a class="btn btn-info btn-xs" onclick="Edit(@item.MainCateID)"><i class="fa fa-edit"></i> Edit</a></td>
                                                <td class=" last"><a class="btn btn-danger btn-xs" onclick="Delete(@item.MainCateID)"><i class="fa fa-trash-o"></i> Delete</a></td>
                                                <td> </td>
                                                <td> </td>
                                            </tr>
                                        }
                                    }

                                </tbody>
                            </table>


                        </div>

                    </div>
                </div>
                <!-- /Table -->
            </div>
        </div>
    </div>
</div>

<script>
    //Reset
    $("#btnReset").click(function () {
        $("#ipMainCateID").val(0);
    });
    //Save
    $("#btnCreate").click(function () {

        var isEmpty = false;
        //Check empty
        $('input.mycontrol').each(function () {
            var value = $(this).val();
            if (value == "") {
                alert("Vui lòng điền đầy đủ các thông tin!");
                $(this).focus();
                isEmpty = true;
                return false;
            }
        })
      //Save data
        if (isEmpty == false) {
            var param = {
                "MainCateID": $("#ipMainCateID").val(),
                "MainCateName": $("#ipCateName").val(),
                "Language": $("#ipCateNameen").val(),
                "MainCateIcon": $("#ipMainCateIcon").val(),
                "MainCateDesc": $("#ipDesc").val(),
                "Sort": $("#ipSort").val(),
            }

            $.post("/Admin/ProductCategory/SaveData", { "data": "" + JSON.stringify(param) + "" }, function (result) {
                window.location.reload();
            });
        }
       
    });
    function Edit(MainCateID) {
        var param = {
            "MainCateID": MainCateID,
        }
        $.ajax({
            url: '/Admin/ProductCategory/GetValue',
            data: param,
            dataType: 'html',
            type: 'GET',
            cache: false,
            success: function (result) {
                var obj = jQuery.parseJSON(result);
                $("#ipMainCateID").val(obj.MainCateID);
                $("#ipCateName").val(obj.MainCateName);
                $("#ipCateNameen").val(obj.Language);
                $("#ipMainCateIcon").val(obj.MainCateIcon);
                $("#ipDesc").val(obj.MainCateDesc);
                $("#ipSort").val(obj.Sort);
            }
        });

    }
    function Delete(MainCateID) {
        if (confirm('Bạn có muốn xóa danh mục này?')) {
            alert(MainCateID)
        }
        
    }
</script>